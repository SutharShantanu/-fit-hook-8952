<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible"
            content="IE=edge">
        <meta name="viewport"
            content="width=device-width, initial-scale=1.0">
        <link rel="icon"
            type="image/x-icon"
            href="/Image/Logo_White_Round.ico">
        <title>Admin | ZEEflix - Watch TV Shows, 100+ Originals, Movies, News &amp; Live TV Online</title>
        <link rel="stylesheet"
            href="/admin.css">

    </head>

    <body>
        <header>
            <nav>
                <img src="/Image/Logo_White_Round.png"
                    alt="Logo_Croped">
                <div class="nav_main">
                    <div id="nav_link">
                        <a href="index.html">Home</a>
                        <a href="/tvshows.html">TV Shows</a>
                        <a href="/movies.html">Movies</a>
                        <a href="/Web.html">Web Series</a>
                        <div class="dropdown">
                            <button class="dropbtn">More</button>
                            <div class="dropdown-content">
                                <a href="#">Live TV</a>
                                <a href="#">Music</a>
                                <a href="#">Cricket</a>
                                <a href="#">Kids</a>
                                <a href="#">Premium Shows</a>
                            </div>
                        </div>
                    </div>
                    <div id="nav_part">
                        <div id="rest">
                            <h1>Welcome Admin :)</h1>
                            <a href="login.html"
                                id="log_in">login</a>
                            <div id="buy_plan"> <img src="/Image/setting.png"
                                    alt="crown">
                                <p>Admin</p>
                            </div>
                            <img id="ham"
                                src="/Image/hamburger.png"
                                alt="">
                        </div>
                    </div>
                </div>
            </nav>
        </header>

        <!-- For ADMIN side Main Data Goes here -->
        <div class="part">
            <div class="main">
                <h2>All Data Visible here</h2>
                <div id="part-child">

                </div>
            </div>

            <div class="mainInput">

                <div id="data">
                    <h2>Add New Data</h2>
                    <form id="gaurav">
                        <input id="imgurl"
                            type="url"
                            placeholder="Image URL">
                        <input id="title"
                            type="text"
                            placeholder="Title">
                        <input id="Duration"
                            type="number"
                            placeholder="Duration">
                        <input id="Rating"
                            type="number"
                            placeholder="Rating">
                        <button id="submitBtn"
                            type="submit">Submit</button>


                    </form>

                </div>
                <div id="delete">
                    <h2>Delete Data Here</h2>
                    <form id="dlt"
                        action="">
                        <input
                            id="deleteinput"
                            type="number"
                            placeholder="Enter Id">
                        <input
                            id="sub"
                            type="submit">
                    </form>
                </div>
            </div>

        </div>


        <!-- Footer -->

        <hr width="93%"
            size="1"
            color="#a785ff">
        <footer id="footer">

            <div class="container">

                <br>

                <div class="foot">
                    <div class="top">
                        <div class="store">
                            <h4>Download Apps</h4>
                            <a href="https://play.google.com/store/apps/details?id=com.graymatrix.did"
                                target="_blank"><img src="https://www.zee5.com/images/play_store.png?ver=2.52.65"
                                    alt=""></a>
                            <a href="https://apps.apple.com/in/app/zee5-shows-live-tv-movies/id743691886"
                                target="_blank"><img src="https://www.zee5.com/images/app_store.png?ver=2.52.65"
                                    alt=""></a>
                        </div>
                        <div class="connect">
                            <h4>Connect with us</h4>
                            <a href="https://www.facebook.com/ZEE5/"
                                target="_blank"><img src="/Image/facebook.png"
                                    alt=""></a>
                            <a href="https://www.instagram.com/zee5/"
                                target="_blank"><img src="/Image/instagram.png"
                                    alt=""></a>
                            <a href="https://twitter.com/zee5india"
                                target="_blank"><img src="/Image/twitter.png"
                                    alt=""></a>
                            <a href="https://www.youtube.com/channel/UCXOgAl4w-FQero1ERbGHpXQ"
                                target="_blank"><img src="/Image/youtube.png"
                                    alt=""></a>
                        </div>
                    </div>

                    <div class="about">
                        <!-- about -->
                        <p><a href="https://www.zee5.com/aboutus">About Us</a></p>

                        <p>|</p>
                        <!-- help center -->
                        <p><a href="https://helpcenter.zee5.com/portal/en/home">Help Center</a></p>

                        <p>|</p>
                        <!-- Privacy policy -->
                        <p><a href="https://www.zee5.com/privacypolicy">Privacy Policy</a></p>
                        <p>|</p>
                        <!-- Privacy policy -->
                        <p><a href="https://www.zee5.com/termsofuse">Terms of Use</a></p>




                    </div>
                    <div class="row">
                        <div class="footer-col">
                            <h3>Popular TV Shows</h3>


                            <div><a
                                    href="https://www.zee5.com/movies/details/kya-meri-sonam-gupta-bewafa-hai/0-0-1z51625">Kumkum
                                    Bhagya</a></div>
                            <div><a href="">Kundali Bhagya</a></div>
                            <div><a href="">Bhagya Lakshmi</a></div>
                            <div><a href="">Tujhse Hai Raabta</a></div>
                            <div><a href="">Kyun Rishton Mein Katti Batti</a></div>



                        </div>
                        <div class="footer-col">
                            <h3>Premium Movies</h3>

                            <div><a href="">Kya Meri Sonam Gupta Bewafa</a></div>
                            <div><a href="">Helmet</a></div>
                            <div><a href="">200 Halla Ho</a></div>
                            <div><a href="">14 Phere</a></div>
                            <div><a href="">Dial 100</a></div>

                        </div>

                        <div class="footer-col">
                            <h3>Popular LIVE TV Channels</h3>

                            <div><a href="">Aaj Tak</a></div>
                            <div><a href="">Zee News</a></div>
                            <div><a href="">Zee Tv HD</a></div>
                            <div><a href="">&TV HD</a></div>
                            <div><a href="">Zee Marathi HD</a></div>

                        </div>
                        <div class="footer-col">
                            <h3>Popular Web Series</h3>

                            <div><a href="">Sunflower</a></div>
                            <div><a href="">Jeet Ki Zid</a></div>
                            <div><a href="">Biccho Ka Khel</a></div>
                            <div><a href="">State of Seige:26/11</a></div>
                            <div><a href="">Naxalbari</a></div>

                        </div>
                        <div class="footer-col">
                            <h3>Bollywood Top Celebrities</h3>

                            <div><a href="">Sunny Leone</a></div>
                            <div><a href="">Disha Patani</a></div>
                            <div><a href="">Deepika Padukone</a></div>
                            <div><a href="">Salman Khan</a></div>
                            <div><a href="">Nora Fatehi</a></div>

                        </div>
                    </div>
                    <div class="end">Best viewed on Google Chrome 80+, Microsoft Edge 81+, Mozilla Firefox 75+,
                        Safari
                        5.1.5+
                        Copyright Â© 2022 Zee Entertainment Enterprises Ltd. All rights reserved.</div>
                </div>
            </div>
        </footer>

    </body>

</html>

<script>
    // let img = document.getElementById("imgurl").value;



    const submit_btn = document.querySelector("#gaurav");
    submit_btn.addEventListener("submit", RegisterFunction);



    function RegisterFunction (event) {
        event.preventDefault();
        let all_input_tags = document.querySelectorAll("#gaurav input");
        console.log(all_input_tags)
        let userObj = {}
        for (let i = 0; i < all_input_tags.length - 1; i++) {
            userObj[all_input_tags[i].id] = all_input_tags[i].value;
        }
        render(userObj)

    }



    async function render (userObj) {

        try {



            let res = await fetch("https://63987501fe03352a94d1a25b.mockapi.io/home1", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(userObj)
            });
            if (res.ok) {
                alert("Movie Successfully Added !",);
                window.location.reload();
                display(data)

            } else {
                alert("Something went wrong");
            }
        } catch (error) {

        }
    }

    let bag = [];
    fetch("https://63987501fe03352a94d1a25b.mockapi.io/home1")
        .then((res) => res.json())
        .then((data) => {
            bag = data
            console.log(data)
            display(data)
        })



    display(bag)
    function display (data) {
        document.querySelector("#part-child").innerHTML = "";
        data.forEach(function (el) {
            let div = document.createElement("div")
            let img = document.createElement("img")
            img.setAttribute("src", el.imgurl)
            let btn = document.createElement("button")
            btn.innerText = "Delete"
            btn.setAttribute.data_id = el.id
            btn.addEventListener("click", (event) => {
                let data_id = event.target.dataset.id;
                console.log(data_id, typeof data_id);
                // DeleteBtn(data_id);
            })

            div.append(img, btn)
            document.querySelector("#part-child").append(div)

        })
    }


    let dlt = document.querySelector("#dlt")
    dlt.addEventListener("submit", (event) => {
        event.preventDefault()
        let id = document.querySelector("#deleteinput").value
        DeleteBtn(id)
        // console.log(id)
    })





    async function DeleteBtn (id) {
        try {
            console.log(id)
            let delete_request = await fetch(`https://63987501fe03352a94d1a25b.mockapi.io/home1/${id}`, {
                method: "DELETE",
                headers: {
                    "Content-Type": "application/json",
                },
            });
            if (delete_request.ok) {

                display(data)
            }
        }

        catch (error) {
            alert("Movie Deleted")
            window.location.reload();
        }
    }




</script>